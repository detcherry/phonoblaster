{% extends "station/root.html" %}

{% block style %}
	<link type="text/css" rel="stylesheet" href="/static/css/station/on.css" />
{% endblock %}

{% block social-block %}
<div id="social-block-sessions" class="stat tuto" data-original-title="Logged in listeners are displayed below">
	<span class="figure">0</span>
	<span class="title">Listeners<span>
</div>
{% if is_admin %}
<a id="social-block-share" class="btn primary" href="#" class="tuto" data-original-title="Share your station on Facebook!">
	Bring your fans!
</a>
{% else %}
<a id="social-block-share" class="btn primary" href="#" class="tuto" data-original-title="Share this station on Facebook!">
	Bring your friends!
</a>
{% endif %}
<div id="social-block-session-pictures"></div>
{% endblock %}

{% block main-right %}
<ul id="tabs">
	<li style="width:66px" class="tuto" data-original-title="Tracks soon on the air!">
		<a style="width:52px" href="#queue-tab" class="current" id="queue-header" >
			Queue
			<span class="round"></span>
		</a>
	</li>
	<li style="width:94px;" class="tuto" data-original-title="Tracks suggested by listeners to the broadcaster">
		<a style="width:80px" href="#suggestions-tab" id="suggestions-header">
			Suggestions
			<span class="round"></span>
		</a>
	</li>
	{% if is_admin %}
	<li style="width:68px" class="tuto" data-original-title="Tracks you recently broadcast.">
		<a style="width:54px" href="#tracks-tab" id="tracks-header">Tracks</a>
	</li>
	<li style="width:52px" class="tuto" data-original-title="Tracks you favorited">
		<a style="width:38px;" href="#favorites-tab" id="favorites-header"></a>
	</li>
	{% endif %}
</ul>
<div id="queue-tab" class="tab-content">
	<div id="search-header">
		<input type="text" value="{% if is_admin %}Add a track{% else %}Suggest a track{% endif %}" id="search" autocomplete="off" class="tuto" data-original-title="Search and {% if is_admin %}add{% else %}suggest{% endif%} tracks from Youtube (soon: Soundcloud)"/>
		<div id="search-overlay"></div>
		<div id="search-tab">
			<div class="tab-items"><!-- No search items --></div>
		</div>
	</div>
	<div class="tab-items">
		<div class="init">No track in the station queue</div>
	</div>
</div>
<div id="suggestions-tab" class="tab-content">
	<div class="tab-items">
		<div class="init">No recent suggestion</div>
	</div>		
</div>
{% if is_admin %}
<div id="favorites-tab" class="tab-content">
	<div class="tab-items">
		<div class="init">No favorite</div>
	</div>
</div>
<div id="tracks-tab" class="tab-content">
	<div class="tab-items">
		<div class="init">No past track for this station</div>
	</div>
</div>
{% endif %}
<!-- Recommandation popup -->
<div class="popup" id="popup-recommendations">
	<h2>Broadcast now!</h2>
	<h3>Put the tracks you recently posted on <strong></strong> in the queue!</h3>
	<div id="recommendations-zone"></div>
	<div class="modal-footer">
		<a class="btn primary">Go to station</a>
	</div>
</div>
<!-- Suggestion popup -->
<div class="popup" id="popup-suggestion">
	<h2>Suggest now!</h2>
	<div class="item">
		<div class="item-picture"><!-- No image yet --></div>
		<div class="item-title">
			<span class="middle"><!-- No title yet --></span>
		</div>
	</div>
	<h3>If you wanna say something cool, do it below:</h3>
	<form action="#" method="post">
		<textarea></textarea>
		<div class="modal-footer">
			<input type="submit" class="btn primary" value="Suggest!"/>
		</div>
	</form>
</div>
<!-- Share popup -->
<div class="popup" id="popup-share">
	{% if is_admin %}<h2>Share on {{ station_proxy.station.name }} Wall</h2>{% else %}<h2>Share on your Wall</h2>{% endif %}
	<form action="#" method="post">
		{% if is_admin %}
		<img class="thumbnail" src="https://graph.facebook.com/{{ station_proxy.station.key.name }}/picture?type=square"/>
		{% else %}
		<img class="thumbnail" src="https://graph.facebook.com/{{ user_proxy.user.key.name }}/picture?type=square"/>
		{% endif %}
		<textarea></textarea>
		<img class="station" src="https://graph.facebook.com/{{ station_proxy.station.key.name }}/picture?type=square"/>
		<div class="facebook-link">
			<span class="link">{{ station_proxy.station.name }}</span>
			<span class="description">Listen now to {{ station_proxy.station.name }} station on Phonoblaster.</span>
		</div>
		<div class="modal-footer">
			<input type="submit" class="btn primary" value="Share!"/>
		</div>
	</form>
</div>
<!-- Switch to off air popup -->
<div class="popup" id="popup-offair">
	<h2>{{ station_proxy.station.name }} is now OFF AIR!</h2>
	<img src="https://graph.facebook.com/{{ station_proxy.station.key.name }}/picture?type=large" class="thumbnail"/>
	<h3>But you can still check out my latest broadcasts</h3>
	<div id="broadcasts"></div>
	<div class="modal-footer">
		<a href="/{{ station_proxy.station.shortname }}" class="btn primary">Check it out!</a>
	</div>
</div>
{% endblock %}


{% block script %}
<!-- Pubnub -->
<div sub-key="sub-aa6b101e-24e9-11e1-ab04-3b69d50a7fd4" ssl="off" origin="pubsub.pubnub.com" id="pubnub"></div>
<script src="https://pubnub.s3.amazonaws.com/pubnub-3.1.min.js"></script>
<!-- App Engine -->
<script type="text/javascript" src="/_ah/channel/jsapi"></script>
<!-- Station -->
<script type="text/javascript" src="/static/js/library/json2.js"></script>
<script type="text/javascript" src="/static/js/common/tab.js"></script>

<script type="text/javascript" src="/static/js/player/favorite.js"></script>
<script type="text/javascript" src="/static/js/player/swfobject.js"></script>
<script type="text/javascript" src="/static/js/player/chromeless.js"></script>

<script type="text/javascript" src="/static/js/station/comment.js"></script>
<script type="text/javascript" src="/static/js/station/counter.js"></script>

<script type="text/javascript" src="/static/js/station/on/session.js"></script>
<script type="text/javascript" src="/static/js/station/on/alert.js"></script>
<script type="text/javascript" src="/static/js/station/on/recommendation.js"></script>
<script type="text/javascript" src="/static/js/station/on/queue.js"></script>
<script type="text/javascript" src="/static/js/station/on/suggestion.js"></script>
<script type="text/javascript" src="/static/js/station/on/search.js"></script>
<script type="text/javascript" src="/static/js/station/on/track.js"></script>
<script type="text/javascript" src="/static/js/station/on/favorite.js"></script>
<script type="text/javascript" src="/static/js/station/on/share.js"></script>
<script type="text/javascript" src="/static/js/station/on/air.js"></script>
<script type="text/javascript" src="/static/js/station/on/on.js"></script>
<script type="text/javascript">
	//Hiding footer and removing padding bottom
	//$("#bottom-bar").hide();
	//$("body").css("padding-bottom",0);
	/*--- Reset ---*/
	USER = null;
	ADMIN = false;
 	STATION = null;
	/*--- User Initialization ---*/
	{% if user_proxy %} 
	USER = {
		"key_name": "{{ user_proxy.user.key.name }}",
		"name": "{{ user_proxy.user.first_name }} {{ user_proxy.user.last_name }}",
	}
	{% endif %}
	/*--- Admin Initialization ---*/
	{% if is_admin %} 
	ADMIN = true;
	{% endif %}
	/*--- Station Initialization ---*/
	STATION = {
		"key_name": "{{ station_proxy.station.key.name }}",
		"shortname": "{{ station_proxy.station.shortname }}",
		"name": "{{ station_proxy.station.name}}",
	}
</script>
{% endblock %}
